## BGP AF on Spine layer
control plane:
10K-12K type 2
10K type 5 - IPv4
5K type 5 - IPv6

## default vrf on EDGE
Fib:
IPv4 A.F - 1.2M routes in EDGE VRF/default if EDGE in default  --> 500k v4 due to memory limitation
IPv6 - A.F. 280K  routes in EDGE VRF/default if EDGE in default --> 100k v6 due to memory limitation

## SVI scale on T3
1440 x VLANs & SVI
20 IP address virtual per VLAN
20 ipv6 address virtual per VLAN

ip hardware fib optimize prefix-length 32 24

platform sand mdb profile l3
ip hardware fib optimize prefixes profile internet
ipv6 hardware fib optimize prefixes profile internet
!
hardware tcam
profile FLEX-ROUTE copy default
feature flex-route copy system-feature-source-profile
no feature acl vlan ip
no feature mirror ip
system profile FLEX-ROUTE

## Trident rib/fib partition
platform trident routing-table partition ?
  1  32K IPv4, 12K IPv6 ( prefix len up to /64 ), 2K IPv6 ( any prefix length )
  2  32K IPv4, 8K IPv6 ( prefix len up to /64 ), 4K IPv6 ( any prefix length )
  3  32K IPv4, 4K IPv6 ( prefix len up to /64 ), 6K IPv6 ( any prefix length )
  4  32K IPv4, 0K IPv6 ( prefix len up to /64 ), 8K IPv6 ( any prefix length )

platform trident forwarding-table partition ?
  0         288k l2 entries, 16k l3 host, 32k lpm entries
  1         224k l2 entries, 80k l3 host, 32k lpm entries
  2         160k l2 entries, 144k l3 host, 32k lpm entries
  3         96k l2 entries, 208k l3 host, 32k lpm entries
  4         32k l2 entries, 16k l3 host, 360k lpm entries
  flexible  Configure the size of MAC, host, exact-match and ALPM tables

## HA Testing:
1. physical reloading
2. VRF CORE shutdowing
   no ip routing vrf PNAP-CORE
3. shutdowning link between CORE/EDGE

## Future PoC Planning
On-Prem Lab
virtual lab (GNS3, Containerlab, ATD)
Automation integration/Single Source of Truth
New Platforms Validation


Flex partiion:
Host                                                     81919    100%          0            0        81919      144003
Host           V4Hosts                                   81463    100%          0            0        81919       86403
Host           V4Mroutes                                     0      0%          0            0        81919           0
Host           V6Hosts                                     456    100%          0            0        81919       57600
Host           V6Mroutes                                     0      0%          0            0        81919           0
LPM                                                      16382    100%          0            0        16382       16382
LPM            V4Routes                                  15833    100%          0            0        16382       15833
LPM            V6Routes                                    549    100%          0            0        16382       12288

cal384.08:39:14#show platform trident l3 summary | grep 'interfaces\|unicast\|LPM'

L3 interfaces: 1440/16383
NextHop entries: 4429/65535 (4427 unicast, 0 multicast, 0 L3MC, 2 sdtag)
IPv4 unicast entries: 81463
IPv6 unicast entries: 228
Reserved IPv4 unicast hosts: 0 (configured: 0)
Reserved IPv6 unicast hosts: 0 (configured: 0)
LPM table mode: 3, table usage: 16382/16382

partition flexible exact-match 16384 l2-shared 98304 l3-shared 131072

* Bare Metal (EVPN Spine/Leaf) 
*    Collapsed Edge/Core 
*    VLAN translation / QinQ (potential new product still in development)
*    Virtualized product L2/L3 spine leaf
*    Edge
*    IEDGE/Core
*    Bare Metal (MLAG , NON-MLAG)
*    Co-location
*    DDoS (two layers)
*    Transport L3
*    Virtualized product MLAG pair
*    Transport L2
*    Storage
